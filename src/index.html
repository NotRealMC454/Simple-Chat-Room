<!doctype html>
<html>
  <head>
    <title>Ultimate Chat</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div id="login-screen">
      <div class="box">
        <h2>Welcome to Ultimate Chat</h2>
        <input type="text" id="username" placeholder="Enter username..." />
        <button onclick="joinChat()">Enter App</button>
      </div>
    </div>

    <div id="settings-modal">
      <div class="box">
        <h2>Settings</h2>
        <input type="text" id="new-username" placeholder="New username..." />
        <button onclick="saveSettings()">Save & Update</button>
        <button
          class="close-btn"
          onclick="
            document.getElementById('settings-modal').style.display = 'none'
          "
        >
          Close
        </button>
      </div>
    </div>

    <div id="sidebar">
      <div class="channel active" onclick="switchChannel('general', this)">
        # general
      </div>
      <div class="channel" onclick="switchChannel('gaming', this)">
        # gaming
      </div>
      <div class="channel" onclick="switchChannel('random', this)">
        # random
      </div>
      <div id="settings-btn" onclick="openSettings()">âš™ï¸ Settings</div>
    </div>

    <div id="chat-container">
      <div id="chat-header"># general</div>
      <div id="chat"></div>
      <div id="input-area">
        <label class="upload-btn" for="file-upload">ğŸ“</label>
        <input type="file" id="file-upload" accept="image/*,video/*" />
        <input type="text" id="msg" placeholder="Message #general..." />
      </div>
    </div>

    <script src="index.js"></script>
    <script>
      const ws = new WebSocket(`ws://${window.location.host}`);
      ws.onmessage = (event) => {
        const data = JSON.parse(event.data);
        if (data.type === "reload") {
          window.location.reload();
        }
      };
    </script>
  </body>
</html>
